<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>MQTT Casino</title>
      <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
      <link rel="icon" type="image/png" href="{{ url_for('static', filename='crown.png') }}">
   </head>
   <body>
      <div class="container">
         <div class="header-row">
            <div class="logo-title">
               <img src="{{ url_for('static', filename='crown.png') }}" class="logo" alt="Logo">
               <h1>MQTT Casino</h1>
               <p class="version"> 
                  <a href="https://github.com/EricZoop/mqttcasino" target="_blank" title="Developed by Eric Zipor, Alex Kim, &amp; Hassan Riaz">v1.0.0</a>
               </p>
            </div>
            <div class="info-display">
               <div class="cards-display">
                  <div class="cards-label">Shoe Cards Remaining</div>
                  <div class="cards-amount" id="cards-remaining">0</div>
               </div>

               <div class="bank-display">
                  <div class="bank-label">Bank</div>
                  <div class="bank-amount" id="bank-amount">$1000</div>
               </div>

            </div>
         </div>
         
         <div class="main-content">
            <div class="game-column">
               <div class="game-table">
                  <div class="hand-section dealer-section">
                     <div class="hand-title">
                        <span>Dealer's Hand</span>
                     </div>
                     <div class="cards-container" id="dealer-cards"></div>
                     <div class="hand-title" style="justify-content: center">
                        <span class="hand-value" id="dealer-value">0</span>
                     </div>
                  </div>
                  <hr />
                  <div id="player-sections-container">
                     <div class="hand-title">
                        <span>Your Hand</span>
                     </div>
                     <div id="player-hands-display"></div>
                  </div>
               </div>
               <div class="status-message" id="status-message">
                  Place your bet to start
               </div>

            </div>
            <div class="controls-column">

               <div class="shoe-info">
                  <label>MQTT Configuration</label>
                  <!-- Top row: Broker URL + Port -->
                  <div class="mqtt-config-row">
                     <input type="text" id="mqtt-broker" placeholder="Broker" value="broker.hivemq.com" />
                     <input type="number" id="mqtt-port" placeholder="Port" value="1883" class="port-input" />
                  </div>
                  <!-- Bottom row: Topic + Update button -->
                  <div class="mqtt-config-row">
                     <input type="text" id="mqtt-topic" placeholder="Topic" value="ece508/blkjck_table1" />
                     <button id="update-mqtt-btn" onclick="updateMqttConfig()">Update MQTT</button>
                  </div>
               </div>

               <!-- Bet Control -->
               <div class="bet-control">
                  <label for="bet-input">Bet Amount</label>
                  <div class="bet-input-row">
                     <input type="number" id="bet-input" min="10" step="1" value="10" />
                     <button class="bet-quick" onclick="setBet(10)">+$10</button>
                     <button class="bet-quick" onclick="setBet(50)">+$50</button>
                     <button class="bet-quick" onclick="setBet(100)">+$100</button>
                  </div>
               </div>
               
               <!-- Game Controls -->
               <div class="controls">
                  <button id="deal-btn" onclick="deal()">Deal</button>
                  <button id="hit-btn" onclick="hit()">
                     Hit
                     <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" transform="rotate(0)matrix(-1, 0, 0, 1, 0, 0)" stroke-width="0">
                        <path fill="currentColor" d="M12.28 16.11c.78-.78 1.89-1.03 2.89-.76v-5.34c0-1.65 1.35-3 3-3 .29 0 .56.05.83.13V5.01c0-1.66-1.34-3-3-3H8c-1.66 0-3 1.34-3 3v14c0 1.66 1.34 3 3 3h5.93l-1.65-1.65a3 3 0 0 1 0-4.24z"></path>
                        <path fill="currentColor" d="M22.65 17.52a.996.996 0 0 0-1.41 0l-2.06 2.06V9.99c0-.55-.45-1-1-1s-1 .45-1 1v9.59l-2.06-2.06a.996.996 0 1 0-1.41 1.41l3.77 3.77c.19.19.44.29.71.29s.52-.11.71-.29l3.77-3.77a.996.996 0 0 0 0-1.41z"></path>
                     </svg>
                  </button>
                  <button id="stand-btn" onclick="stand()" disabled>
                     Stand
                     <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none">
                        <path fill="currentColor" d="M17.36 23a2 2 0 0 0 1.96-1.61L21 15V6.5c0-.83-.67-1.5-1.5-1.5S18 5.67 18 6.5V10h-1V4.5c0-.83-.67-1.5-1.5-1.5S14 3.67 14 4.5V10h-1V2.5c0-.83-.67-1.5-1.5-1.5S10 1.67 10 2.5V10H9V4.5C9 3.67 8.33 3 7.5 3S6 3.67 6 4.5V15l-2.39-3.19a1.223 1.223 0 0 0-2.07 1.28l3.92 8.73C5.78 22.54 6.5 23 7.28 23z"></path>
                     </svg>
                  </button>
                  <button id="double-btn" onclick="doubleDown()" disabled draggable="false">
                     Double
                     <span style="font-size: 14px; transform: translateY(1px)">(x2)</span>
                  </button>
                  <button id="split-btn" onclick="split()" disabled>
                     Split
                     <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g>
                           <path fill-rule="evenodd" clip-rule="evenodd" d="M1 4C1 2.34315 2.34315 1 4 1H14C15.1323 1 16.1181 1.62732 16.6288 2.55337L20.839 3.68148C22.4394 4.11031 23.3891 5.75532 22.9603 7.35572L19.3368 20.8787C18.908 22.4791 17.263 23.4288 15.6626 23L8.19849 21H4C2.34315 21 1 19.6569 1 18V4ZM17 18V4.72339L20.3213 5.61334C20.8548 5.75628 21.1714 6.30461 21.0284 6.83808L17.405 20.361C17.262 20.8945 16.7137 21.2111 16.1802 21.0681L15.1198 20.784C16.222 20.3403 17 19.261 17 18ZM4 3C3.44772 3 3 3.44772 3 4V18C3 18.5523 3.44772 19 4 19H14C14.5523 19 15 18.5523 15 18V4C15 3.44772 14.5523 3 14 3H4Z" fill="currentColor"></path>
                        </g>
                     </svg>
                  </button>
                  <button id="reset-bank-btn" onclick="resetBankAndShuffle()" class="reset-btn">
                     Shuffle & Reset Bank
                  </button>
               </div>
               

               


            </div>
         </div>
      </div>
      <script src="{{ url_for('static', filename='script.js') }}" defer></script>
   </body>
</html>